[gcode_macro M0]
gcode:
    RESPOND PREFIX=tgalarm MSG="Programmed pause"
    PAUSE

[gcode_macro M600]
gcode:
    SAVE_GCODE_STATE NAME=M600_state
    RESPOND PREFIX=tgalarm MSG="Filament change"
    PAUSE
    G91
    G1 E-650 F500
    G90
    RESTORE_GCODE_STATE NAME=M600_state